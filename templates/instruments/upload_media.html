{% extends "index.html" %}

{% block title %}–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –º–µ–¥—ñ–∞{% endblock %}

{% block content %}

<h1>–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –º–µ–¥—ñ–∞</h1>

<h2>üìÅ –°—Ç–≤–æ—Ä–∏—Ç–∏ –∞–ª—å–±–æ–º</h2>
<form method="post" class="mb-4">
    {% csrf_token %}
    <div class="form-group">
        {{ album_form.name.label_tag }}
        {{ album_form.name }}
    </div>
    <button type="submit" name="create_album">–°—Ç–≤–æ—Ä–∏—Ç–∏ –∞–ª—å–±–æ–º</button>
</form>

<h2>üñºÔ∏è –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</h2>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ photo_form.as_p }}
    <button type="submit" name="upload_photo">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è</button>
</form>

<h2>üéûÔ∏è –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—ñ–¥–µ–æ</h2>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ video_form.as_p }}
    <button type="submit" name="upload_video">–ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—ñ–¥–µ–æ</button>
</form>

<hr>

<h2>üìÇ –ú–µ–¥—ñ–∞ –±–µ–∑ –∞–ª—å–±–æ–º—É</h2>

{% if not albums %}
    <p>‚ùó–°–ø–æ—á–∞—Ç–∫—É —Å—Ç–≤–æ—Ä—ñ—Ç—å —Ö–æ—á–∞ –± –æ–¥–∏–Ω –∞–ª—å–±–æ–º, —â–æ–± –º–∞—Ç–∏ –∑–º–æ–≥—É –¥–æ–¥–∞–≤–∞—Ç–∏ –º–µ–¥—ñ–∞.</p>
{% endif %}

<h3>–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è:</h3>
{% for photo in unassigned_photos %}
    <img src="{{ photo.image.url }}" width="100">
    {% if albums %}
        <form method="post" action="{% url 'assign_to_album' %}">
            {% csrf_token %}
            <input type="hidden" name="media_id" value="{{ photo.id }}">
            <input type="hidden" name="media_type" value="photo">
            <select name="album">
                {% for album in albums %}
                    <option value="{{ album.id }}">{{ album.name }}</option>
                {% endfor %}
            </select>
            <button type="submit">–î–æ–¥–∞—Ç–∏ –¥–æ –∞–ª—å–±–æ–º—É</button>
        </form>
    {% else %}
        <p><em>–ù–µ–º–∞—î –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –∞–ª—å–±–æ–º—ñ–≤ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è.</em></p>
    {% endif %}
{% empty %}
    <p>–ù–µ–º–∞—î –∑–æ–±—Ä–∞–∂–µ–Ω—å –±–µ–∑ –∞–ª—å–±–æ–º—É.</p>
{% endfor %}

<h3>–í—ñ–¥–µ–æ:</h3>
{% for video in unassigned_videos %}
    <video width="200" controls>
        <source src="{{ video.video.url }}">
    </video>
    {% if albums %}
        <form method="post" action="{% url 'assign_to_album' %}">
            {% csrf_token %}
            <input type="hidden" name="media_id" value="{{ video.id }}">
            <input type="hidden" name="media_type" value="video">
            <select name="album">
                {% for album in albums %}
                    <option value="{{ album.id }}">{{ album.name }}</option>
                {% endfor %}
            </select>
            <button type="submit">–î–æ–¥–∞—Ç–∏ –¥–æ –∞–ª—å–±–æ–º—É</button>
        </form>
    {% else %}
        <p><em>–ù–µ–º–∞—î –¥–æ—Å—Ç—É–ø–Ω–∏—Ö –∞–ª—å–±–æ–º—ñ–≤ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è.</em></p>
    {% endif %}
{% empty %}
    <p>–ù–µ–º–∞—î –≤—ñ–¥–µ–æ –±–µ–∑ –∞–ª—å–±–æ–º—É.</p>
{% endfor %}

{% endblock %}

